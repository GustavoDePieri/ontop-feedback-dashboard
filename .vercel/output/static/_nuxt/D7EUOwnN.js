import{_ as D}from"./BXrZqH54.js";import{u as W}from"./CeJfwST1.js";import{r as m,c as n,a as e,j as u,u as s,t as a,p as g,F as y,m as h,b as A,w as C,o as l,d as f}from"#entry";const F={class:"min-h-screen bg-gray-50 p-8"},N={class:"max-w-4xl mx-auto"},S={class:"bg-white rounded-lg shadow p-6 mb-6"},$={class:"space-y-4"},I=["disabled"],O={key:0,class:"mt-2 text-xs text-gray-600 overflow-auto"},P={class:"bg-white rounded-lg shadow p-6 mb-6"},R={class:"space-y-4"},V=["disabled"],B={key:0,class:"mt-4"},j={class:"text-sm text-gray-600"},E={class:"mt-2 max-h-40 overflow-auto"},G={key:1,class:"mt-2 text-xs text-red-600 overflow-auto"},J={class:"bg-white rounded-lg shadow p-6 mb-6"},L={class:"space-y-4"},z=["disabled"],H={key:0,class:"mt-3 mb-3 p-3 bg-white rounded border"},q={class:"grid grid-cols-2 gap-2 text-sm"},K={class:"text-blue-600"},M={class:"text-blue-600"},Q={key:1,class:"mt-4 space-y-2"},U={class:"flex items-start justify-between"},X={class:"flex-1"},Y={class:"text-gray-800"},Z={class:"text-gray-600 mt-1"},ss={key:0,class:"text-red-600 mt-1 text-xs"},es={class:"ml-2 text-lg"},ts={key:0,class:"mt-2 text-xs text-gray-500 overflow-auto bg-white p-2 rounded border"},as={key:2,class:"mt-2 text-xs text-red-600 overflow-auto"},rs={class:"mt-6"},is={__name:"test",setup(os){const b=m(!1),p=m(!1),x=m(!1),c=m(null),d=m(null),t=m(null),_=async()=>{b.value=!0,c.value=null;try{const o=await $fetch("/api/sheets/test");c.value={success:o.success,message:o.message,details:o}}catch(o){c.value={success:!1,message:`Connection failed: ${o.message}`,details:o}}finally{b.value=!1}},v=async()=>{p.value=!0,d.value=null;try{const o=await $fetch("/api/sheets/data");d.value={success:!0,message:`Successfully loaded ${o.data?.length||0} items`,data:o.data}}catch(o){d.value={success:!1,message:`Data fetch failed: ${o.message}`,error:o.message}}finally{p.value=!1}},k=async()=>{x.value=!0,t.value=null;try{const o=await $fetch("/api/diio/test-transcripts");t.value=o}catch(o){t.value={success:!1,message:`Test failed: ${o.message}`,error:o.message,summary:{authenticationWorks:!1,transcriptAccessWorks:!1,availableTranscripts:0},results:[]}}finally{x.value=!1}};return W({title:"Debug Page - Ontop Feedback Analytics"}),(o,r)=>{const w=D;return l(),n("div",F,[e("div",N,[r[9]||(r[9]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-8"},"ðŸ”§ Debug Dashboard",-1)),e("div",S,[r[0]||(r[0]=e("h2",{class:"text-xl font-semibold mb-4"},"API Connection Test",-1)),e("div",$,[e("button",{onClick:_,disabled:s(b),class:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200"},a(s(b)?"Testing...":"Test Google Sheets Connection"),9,I),s(c)?(l(),n("div",{key:0,class:g(["p-4 rounded-lg",{"bg-green-50 border border-green-200":s(c).success,"bg-red-50 border border-red-200":!s(c).success}])},[e("p",{class:g(["font-medium",{"text-green-800":s(c).success,"text-red-800":!s(c).success}])},a(s(c).message),3),s(c).details?(l(),n("pre",O,a(JSON.stringify(s(c).details,null,2)),1)):u("",!0)],2)):u("",!0)])]),e("div",P,[r[1]||(r[1]=e("h2",{class:"text-xl font-semibold mb-4"},"Data Fetch Test",-1)),e("div",R,[e("button",{onClick:v,disabled:s(p),class:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200"},a(s(p)?"Fetching...":"Fetch Feedback Data"),9,V),s(d)?(l(),n("div",{key:0,class:g(["p-4 rounded-lg",{"bg-green-50 border border-green-200":s(d).success,"bg-red-50 border border-red-200":!s(d).success}])},[e("p",{class:g(["font-medium",{"text-green-800":s(d).success,"text-red-800":!s(d).success}])},a(s(d).message),3),s(d).data&&s(d).data.length>0?(l(),n("div",B,[e("p",j,"Found "+a(s(d).data.length)+" feedback items:",1),e("div",E,[(l(!0),n(y,null,h(s(d).data.slice(0,3),i=>(l(),n("div",{key:i.id,class:"text-xs bg-gray-50 p-2 rounded mb-2"},[e("strong",null,a(i.accountName),1),f(": "+a(i.feedback.substring(0,100))+"... ",1)]))),128))])])):s(d).error?(l(),n("pre",G,a(s(d).error),1)):u("",!0)],2)):u("",!0)])]),e("div",J,[r[7]||(r[7]=e("h2",{class:"text-xl font-semibold mb-4"},"ðŸŽ™ï¸ DIIO Transcript API Test",-1)),e("div",L,[e("button",{onClick:k,disabled:s(x),class:"bg-purple-600 hover:bg-purple-700 disabled:bg-gray-400 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200"},a(s(x)?"Testing...":"Test DIIO Transcript Access"),9,z),s(t)?(l(),n("div",{key:0,class:g(["p-4 rounded-lg",{"bg-green-50 border border-green-200":s(t).success,"bg-yellow-50 border border-yellow-200":!s(t).success&&s(t).summary?.authenticationWorks,"bg-red-50 border border-red-200":!s(t).success&&!s(t).summary?.authenticationWorks}])},[e("p",{class:g(["font-medium mb-2",{"text-green-800":s(t).success,"text-yellow-800":!s(t).success&&s(t).summary?.authenticationWorks,"text-red-800":!s(t).success&&!s(t).summary?.authenticationWorks}])},a(s(t).message),3),s(t).summary?(l(),n("div",H,[e("div",q,[e("div",null,[r[2]||(r[2]=e("strong",null,"Authentication:",-1)),e("span",{class:g(s(t).summary.authenticationWorks?"text-green-600":"text-red-600")},a(s(t).summary.authenticationWorks?"âœ… Working":"âŒ Failed"),3)]),e("div",null,[r[3]||(r[3]=e("strong",null,"Transcript Access:",-1)),e("span",{class:g(s(t).summary.transcriptAccessWorks?"text-green-600":"text-red-600")},a(s(t).summary.transcriptAccessWorks?"âœ… Working":"âŒ Failed"),3)]),e("div",null,[r[4]||(r[4]=e("strong",null,"Available Transcripts:",-1)),e("span",K,a(s(t).summary.availableTranscripts),1)]),e("div",null,[r[5]||(r[5]=e("strong",null,"Steps Passed:",-1)),e("span",M,a(s(t).summary.successfulSteps)+"/"+a(s(t).summary.totalSteps),1)])])])):u("",!0),s(t).results&&s(t).results.length>0?(l(),n("div",Q,[r[6]||(r[6]=e("p",{class:"text-sm font-semibold text-gray-700"},"Test Results:",-1)),(l(!0),n(y,null,h(s(t).results,(i,T)=>(l(),n("div",{key:T,class:g(["p-3 rounded border text-sm",{"bg-green-50 border-green-200":i.success,"bg-red-50 border-red-200":!i.success}])},[e("div",U,[e("div",X,[e("strong",Y,a(i.step),1),e("p",Z,a(i.message),1),i.error?(l(),n("p",ss,"Error: "+a(i.error),1)):u("",!0)]),e("span",es,a(i.success?"âœ…":"âŒ"),1)]),i.details?(l(),n("pre",ts,a(JSON.stringify(i.details,null,2)),1)):u("",!0)],2))),128))])):s(t).error?(l(),n("pre",as,a(s(t).error),1)):u("",!0)],2)):u("",!0)])]),e("div",rs,[A(w,{to:"/",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"},{default:C(()=>[...r[8]||(r[8]=[f(" Go to Dashboard ",-1)])]),_:1})])])])}}};export{is as default};
